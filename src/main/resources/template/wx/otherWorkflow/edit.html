<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<meta charset="utf-8">

<head th:include="include :: header"></head>

<body class="white-bg">
    <div class="wrapper wrapper-content animated fadeInRight ibox-content">
        <form class="form-horizontal m" id="form-otherWorkflow-edit">
            <input id="id" name="id" th:value="${otherWorkflow.id}" type="hidden">
            <div class="form-group">
                <label class="col-sm-2 control-label">名子：</label>
                <div class="col-sm-4">
                    <input id="cnName" name="cnName" th:value="${otherWorkflow.cnName}" class="form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">编号：</label>
                <div class="col-sm-4">
                    <input id="enName" name="enName" th:value="${otherWorkflow.enName}" class="form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">开始日期：</label>
                <div class="col-sm-4">
                    <input name="startTime" th:value="${#dates.format(otherWorkflow.startTime,'yyyy-MM-dd')}" type="text" class="time-input form-control" id="startTime" placeholder="开始时间">
                </div>
                <label class="col-sm-2 control-label">〜结束日期：</label>
                <div class="col-sm-4">
                        <input name="endTime" th:value="${#dates.format(otherWorkflow.endTime,'yyyy-MM-dd')}" type="text" class="time-input form-control" id="endTime" placeholder="结束时间">
                </div>
            </div>
            <hr>
            <div class="form-group">
                <label class="col-sm-2 control-label">周一上班时间：</label>
                <div class="col-sm-4">
                    <input id="onMon" name="onMon" th:value="${otherWorkflow.onMon}" class="my-time form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">下班时间：</label>
                <div class="col-sm-4">
                    <input id="offMon" name="offMon" th:value="${otherWorkflow.offMon}" class="my-time form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">周二上班时间：</label>
                <div class="col-sm-4">
                    <input id="onTue" name="onTue" th:value="${otherWorkflow.onTue}" class="my-time form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">下班时间：</label>
                <div class="col-sm-4">
                    <input id="offTue" name="offTue" th:value="${otherWorkflow.offTue}" class="my-time form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">周三上班时间：</label>
                <div class="col-sm-4">
                    <input id="onWed" name="onWed" th:value="${otherWorkflow.onWed}" class="my-time form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">下班时间：</label>
                <div class="col-sm-4">
                    <input id="offWed" name="offWed" th:value="${otherWorkflow.offWed}" class="my-time form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">周四上班时间：</label>
                <div class="col-sm-4">
                    <input id="onThu" name="onThu" th:value="${otherWorkflow.onThu}" class="my-time form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">下班时间：</label>
                <div class="col-sm-4">
                    <input id="offThu" name="offThu" th:value="${otherWorkflow.offThu}" class="my-time form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">周五上班时间：</label>
                <div class="col-sm-4">
                    <input id="onFri" name="onFri" th:value="${otherWorkflow.onFri}" class="my-time form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">下班时间：</label>
                <div class="col-sm-4">
                    <input id="offFri" name="offFri" th:value="${otherWorkflow.offFri}" class="my-time form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">周六上班时间：</label>
                <div class="col-sm-4">
                    <input id="onSat" name="onSat" th:value="${otherWorkflow.onSat}" class="my-time form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">下班时间：</label>
                <div class="col-sm-4">
                    <input id="offSat" name="offSat" th:value="${otherWorkflow.offSat}" class="my-time form-control" type="text">
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">周日上班时间：</label>
                <div class="col-sm-4">
                    <input id="onSun" name="onSun" th:value="${otherWorkflow.onSun}" class="my-time form-control" type="text">
                </div>
                <label class="col-sm-2 control-label">下班时间：</label>
                <div class="col-sm-4">
                    <input id="offSun" name="offSun" th:value="${otherWorkflow.offSun}" class="my-time form-control" type="text">
                </div>
            </div>
			<div class="form-group">
				<label class="col-sm-3 control-label">状态：</label>
                <div class="col-sm-8">
                    <label class="radio-box"> <input type="radio" name="status" value="true"  th:checked="'true'==${otherWorkflow.status}" /> 正常 </label>
                    <label class="radio-box"> <input type="radio" name="status" value="false" th:checked="'false'==${otherWorkflow.status}" /> 停用 </label>
                </div>
            </div>
            <hr>
			<div class="form-group">
				<label class="col-sm-3 control-label">角色：</label>
				<div class="col-sm-8">
					<label th:each="emp:${emps}" class="check-box">
						<input name="empIds" type="checkbox" th:value="${emp.id}" th:text="${emp.cnName}" th:checked="${emp.flag}" th:disabled="${emp.status == 'false'}">
					</label>
				</div>
			</div>
        </form>
    </div>
    <div th:include="include::footer"></div>
    <script type="text/javascript">
    var prefix = ctx + "wx/otherWorkflow";
    $("#form-otherWorkflow-edit").validate({
        onkeyup: false,
        rules: {
            xxxx: {
                required: true,
            },
        }
    });

   function submitHandler() {
        if ($.validate.form()) {
            // $.operate.save(prefix + "/addDo", $('#form-otherWorkflow-add').serialize());
            //$.modal.alertError("参数错误");

            var obj = {};
            var form = $('#form-otherWorkflow-edit');
            $.each(form.serializeArray(), function(index) {
                if (obj[this['name']]) {
                    obj[this['name']] = obj[this['name']] + "," + this['value'];
                } else {
                    obj[this['name']] = this['value'];
                }
            });

            console.log(obj);
            //obj.status = $("input[name='status']").is(':checked') == true ? true : false;
        	$.ajax({
        		cache : true,
        		type : "POST",
        		url : prefix + "/editDo",
                data: obj,
        		async : false,
        		error : function(request) {
        			$.modal.alertError("系统错误");
        		},
        		success : function(data) {
        			$.operate.successCallback(data);
        		}
        	});
        }
    }


        
    $(function() {


        layui.use('laydate', function() {
            var laydate = layui.laydate;
            var times = $(".my-time");
            for (var i = 0; i < times.length; i++) {
                var time = times[i];
                laydate.render({
                    elem: time,
                    theme: 'molv',
                    trigger: 'click',
                    type: 'time',
                    done: function(value, date) {}
                });
            }
        });

    })
    </script>
</body>

</html>
